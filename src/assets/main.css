@tailwind base;
@tailwind components;
@tailwind utilities;

/* -------------------------- */
/*                            */
/*            BASE            */
/*                            */
/* -------------------------- */
@layer base {
  :root {
    /* fond et textes */
    --bg: #fafafa;
    --fg: #0a0a0a;

    /* neon grid */
    --horizon: rgba(120,40,255,.18);
    --grid-size: 48px;      /* taille des carreaux */
    --grid-persp: 900px;    /* profondeur de la perspective */
    --grid-tilt: 80deg;     /* inclinaison du plan */
    --grid-color: rgba(255,0,255,.35);

    /* accents */
    --accent-1: #7a00ff;
    --accent-1-rgb: 122, 0, 255;
    --accent-2: #00f6ff;
    --accent-2-rgb: 0, 246, 255;
    --accent-3: #ff6b6b;
    --accent-3-rgb: 255, 107, 107;
  }

  .dark {
    /* fond et textes */
    --bg: #060714;
    --fg: #ffffff;

    /* neon grid */
    --horizon: rgba(120,40,255,.18);
    --grid-line: rgba(20,20,20,.12);
    --grid-color: rgba(0,255,255,.6);

    /* accents */
    --accent-1: #b388ff;
    --accent-1-rgb: 179, 136, 255;
    --accent-2: #6ff3ff;
    --accent-2-rgb: 111, 243, 255;
    --accent-3: #ff9fb0;
    --accent-3-rgb: 255, 159, 176;
  }

  body {
    @apply font-sans;
    cursor: none;     
  }
  a, button, input, textarea, label, select {
    cursor: none !important;
  }

  /* focus pour impaired users */
  :focus-visible {
    outline: 2px solid var(--accent-2);
    outline-offset: 2px;
    border-radius: .375rem;
  }
  :focus:not(:focus-visible) {
    outline: none;
  }
  button:focus:not(:focus-visible),
  select:focus:not(:focus-visible) {
    outline: none;
    box-shadow: none;
  }

  /* respect reduced motion */
  @media (prefers-reduced-motion: reduce){
    .motion-ok{ animation: none !important; transition: none !important; }
  }
}

/* -------------------------- */
/*                            */
/*       TAILWIND UTILS       */
/*                            */
/* -------------------------- */
@layer utilities {
  .bg-bg    { background-color: var(--bg); }
  .text-fg  { color: var(--fg); }
  .text-accent-1 { color: var(--accent-1); }
  .text-accent-2 { color: var(--accent-2); }
  .text-accent-3 { color: var(--accent-3); }
  .bg-accent-1   { background-color: var(--accent-1); }
  .bg-accent-2   { background-color: var(--accent-2); }
  .bg-accent-3   { background-color: var(--accent-3); }
  .shadow-neon   { box-shadow: 0 0 30px rgba(255,107,107,.7), 0 0 60px rgba(122,0,255,.5); }
  .border-accent { border-color: var(--accent-3) }
  .cursor-bg-light { background-color: var(--accent-3) !important }
  .cursor-bg-dark { background-color: var(--accent-2) !important }
}

/* -------------------------- */
/*                            */
/*         COMPOSANTS         */
/*                            */
/* -------------------------- */
@layer components {
  /* -------------------------- */
  /*           NAVBAR           */
  /* -------------------------- */
  .nav-text {
    @apply transition;
    color: var(--fg);
  }

  .nav-text:hover{
    color: var(--accent-3);
  }

  .dark .nav-text {
    color: var(--fg);
  }

  .dark .nav-text:hover {
    color: var(--accent-3);
  }
  .nav-cta {
    @apply px-3 py-1 rounded font-semibold transition;
    background-color: var(--accent-3);
    color: var(--bg);
  }
  .nav-cta:hover {
    background-color: var(--accent-3);
    color: var(--bg);
  }
  .dark .nav-cta {
    background-color: var(--accent-3);
    color: var(--fg);
  }
  .dark .nav-cta:hover {
    background-color: var(--accent-1);
    color: var(--fg);
  }
  .logo-nav {
    color: var(--bg);
  }
  .logo-nav:hover {
    color: var(--accent-3);
  }
  .dark .logo-nav {
    color: var(--fg);
  }
  .dark .logo-nav:hover {
    color: var(--accent-3);
  }
  .nav-mobile-text { @apply text-2xl font-semibold hover:text-clpurple; }

  /* -------------------------- */
  /*    LOGIN / REGISTER        */
  /* -------------------------- */
  .login-card        { @apply w-full max-w-md space-y-8 bg-white p-8 rounded shadow; }
  .login-title       { @apply text-center text-2xl font-bold text-gray-900; }
  .login-text        { @apply text-center text-sm text-gray-600; }
  .login-cta-text    { @apply font-medium text-clpurple hover:text-clpurple; }
  .login-label-text  { @apply block text-sm font-medium text-gray-700; }
  .login-label-box   { @apply mt-1 block w-full rounded border border-gray-300 px-3 py-2 shadow-sm focus-visible:outline-none focus-visible:ring-indigo-500 focus-visible:border-indigo-500 sm:text-sm text-gray-700; }
  .login-errors-text { @apply text-xs text-red-500 mt-1 list-disc ml-4; }
  .login-main-button { @apply w-full flex justify-center rounded-md border border-transparent py-2 px-4 text-sm font-medium text-white hover:bg-indigo-700 transition; background-color: var(--accent-1); }
  .login-third-party { @apply flex w-full items-center justify-center rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-500 shadow-sm hover:bg-gray-50; }

  /* -------------------------- */
  /*    AUTH LAYOUTS            */
  /* -------------------------- */
  .auth-wrapper { position: relative; min-height: 100vh; }
  .auth-horizon {
    position: absolute; inset: 0; pointer-events: none;
    background: linear-gradient(180deg, transparent 0%, var(--horizon) 50%, var(--bg) 100%);
  }
  .auth-persp {
    position: absolute; inset: 0; pointer-events: none;
    perspective: var(--grid-persp); perspective-origin: 50% 50%;
  }
  .auth-grid {
    position: absolute; left: 50%; top: 50%;
    width: 200vw; height: 200vh; transform: rotateX(var(--grid-tilt)) translate(-50%, -50%);
    transform-origin: center;
    background-image:
      repeating-linear-gradient(0deg, var(--grid-color) 0 1px, transparent 1px var(--grid-size)),
      repeating-linear-gradient(90deg, var(--grid-color) 0 1px, transparent 1px var(--grid-size));
    -webkit-mask-image: linear-gradient(to top, black 55%, transparent 100%);
            mask-image: linear-gradient(to top, black 55%, transparent 100%);
  }
  /* -------------------------- */
  /*         AUTH CARDS         */
  /* -------------------------- */
  .auth-card {
    @apply w-full max-w-md rounded-2xl shadow-xl border transition;
    background-color: var(--bg);
    color: var(--fg);
    border-color: color-mix(in oklab, var(--fg) 12%, transparent);
    box-shadow: 0 0 20px rgba(var(--accent-3-rgb), 0.35);
  }
  /* -------------------------- */
  /*   AUTH TITRES ET TXT       */
  /* -------------------------- */
  .auth-title   { @apply text-center text-3xl font-extrabold; color: var(--fg); }
  .auth-subtext { @apply text-center text-sm; color: color-mix(in oklab, var(--fg) 70%, transparent); }
  /* -------- AUTH CTA -------- */
  .auth-link {
    @apply font-medium transition;
    color: var(--accent-3);
  }
  .auth-link:hover { color: var(--accent-1); }
  /* -------- AUTH INPUTS (labels) -------- */
  .auth-label { @apply block text-sm font-medium mb-1; color: color-mix(in oklab, var(--fg) 85%, transparent); }
  .auth-input {
    @apply block w-full rounded-md px-3 py-2 text-sm transition;
    background-color: color-mix(in oklab, var(--bg) 96%, var(--fg) 4%);
    color: var(--fg);
    border: 1px solid color-mix(in oklab, var(--fg) 18%, transparent);
    outline: none;
  }
  .auth-input::placeholder {
    color: color-mix(in oklab, var(--fg) 45%, transparent);
  }
  .auth-input:focus {
    border-color: var(--accent-2);
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent-2) 35%, transparent);
  }
  /* -------- auth checkbox & helpers -------- */
  .auth-check-label { @apply text-sm select-none; color: color-mix(in oklab, var(--fg) 70%, transparent); }
  .auth-checkbox { @apply h-4 w-4 rounded; border: 1px solid color-mix(in oklab, var(--fg) 25%, transparent); }
  .auth-checkbox:focus { box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent-2) 35%, transparent); }
  /* -------- auth boutons -------- */
  .auth-btn-primary {
    @apply w-full inline-flex justify-center items-center rounded-md py-2 px-4 text-sm font-semibold transition;
    background-color: var(--accent-3);
    color: var(--bg);
    border: 1px solid transparent;
  }
  .auth-btn-primary:hover {
    background-color: var(--accent-1);
  }
  .auth-btn-secondary {
    @apply inline-flex w-full items-center justify-center rounded-md py-2 px-4 text-sm font-medium border transition;
    background-color: var(--bg);
    color: color-mix(in oklab, var(--fg) 70%, transparent);
    border-color: color-mix(in oklab, var(--fg) 20%, transparent);
  }
  .auth-btn-secondary:hover {
    color: var(--fg);
    border-color: color-mix(in oklab, var(--fg) 35%, transparent);
    background-color: color-mix(in oklab, var(--bg) 92%, var(--fg) 8%);
  }
  /* -------- separateur -------- */
  .auth-sep-line { border-top: 1px solid color-mix(in oklab, var(--fg) 18%, transparent); }
  .auth-sep-text {
    @apply px-2 text-sm;
    background-color: var(--bg);
    color: color-mix(in oklab, var(--fg) 60%, transparent);
  }
  /* -------------------------- */
  /*         DASHBOARD          */
  /* -------------------------- */
  /* -------- Layout -------- */
  .dashboard {
    @apply min-h-screen flex flex-col md:flex-row;
    background-color: var(--bg);
    color: var(--fg);
  }
  .dashboard-aside {
    @apply hidden md:flex w-64 p-4 flex-col gap-6 justify-center border-r;
    background-color: color-mix(in oklab, var(--bg) 96%, var(--fg) 4%);
    border-color: color-mix(in oklab, var(--fg) 12%, transparent);
  }
  .dashboard-main { @apply flex-1 flex flex-col; }
  /* -------- Banner / Avatar -------- */
  .banner {
    @apply relative h-40 md:h-52;
  }
  .banner-img {
    @apply w-full h-full object-cover;
    filter: saturate(0.9);
  }
  .avatar-wrap { @apply absolute inset-0 flex flex-col items-center justify-center md:items-start md:justify-end md:left-6 md:bottom-[-4rem]; }
  .avatar {
    @apply rounded-full overflow-hidden shadow-md;
    width: 6rem; height: 6rem;
  }
  @media (min-width: 768px) {
    .avatar { width: 10rem; height: 10rem; }
  }
  .avatar-ring {
    border: 4px solid var(--bg);
    background-color: var(--bg);
  }
  .username {
    @apply mt-2 text-base md:text-xl font-semibold text-center md:text-left;
    color: var(--fg);
    text-shadow: 0 1px 0 rgba(0,0,0,.25);
  }
  /* -------- Mobile tabs -------- */
  .dashboard-tabs {
    @apply md:hidden flex justify-around py-3 border-t border-b;
    background-color: var(--bg);
    border-color: color-mix(in oklab, var(--fg) 12%, transparent);
  }
  .tab-btn {
    @apply flex flex-col items-center text-xs transition;
    color: color-mix(in oklab, var(--fg) 55%, transparent);
  }
  .tab-btn--active { color: var(--accent-1); font-weight: 600; }
  /* -------- Cards / Panels -------- */
  .panel {
    @apply rounded-md p-6;
    background-color: color-mix(in oklab, var(--bg) 95%, var(--fg) 5%);
    box-shadow: 0 0 20px rgba(var(var(--accent-3-rgb), 0.35));
    border: 1px solid color-mix(in oklab, var(--fg) 10%, transparent);
  }
  .stats-grid {
    @apply grid grid-cols-2 gap-6 max-w-md mx-auto text-center;
  }
  .stat-value   { @apply text-3xl font-bold; color: var(--fg); }
  .stat-label   { @apply text-sm; color: color-mix(in oklab, var(--fg) 55%, transparent); }
  .winrate      { @apply col-span-2 text-xl font-semibold; color: var(--accent-1); }
  /* -------- Sidebar (buttons) -------- */
  .side-btn {
    @apply flex items-center gap-2 px-3 py-2 rounded-full transition;
    color: color-mix(in oklab, var(--fg) 80%, transparent);
  }
  .side-btn:hover { background-color: color-mix(in oklab, var(--accent-3) 12%, transparent); }
  .side-btn--active {
    background-color: var(--accent-3);
    color: var(--bg);
  }
  /* -------- Settings form -------- */
  .set-title { @apply text-2xl font-bold text-center; color: var(--fg); }
  .set-label { @apply block text-sm font-medium; color: color-mix(in oklab, var(--fg) 85%, transparent); }
  .set-input {
    @apply w-full rounded px-3 py-2 text-sm shadow-sm transition;
    background: color-mix(in oklab, var(--bg) 96%, var(--fg) 4%);
    color: var(--fg);
    border: 1px solid color-mix(in oklab, var(--fg) 18%, transparent);
    outline: none;
  }
  .set-input:focus {
    border-color: var(--accent-2);
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent-2) 35%, transparent);
  }
  .btn-primary {
    @apply w-full font-semibold py-2 px-4 rounded transition;
    background-color: var(--accent-3);
    color: var(--bg);
  }
  .btn-primary:hover { background-color: var(--accent-1); }
  .msg-ok   { @apply text-sm text-center; color: #16a34a; } /* = green-600 enn tailwind*/
  .msg-err  { @apply text-sm text-center; color: #ef4444; } /* = red-500 en tailwind */

  .friends-btn {
    @apply inline-flex items-center justify-center rounded-md py-2 px-4 text-sm font-semibold transition border;
    border-color: transparent;
  }
  .friends-btn:disabled { @apply opacity-50 pointer-events-none; }
  .friends-btn-accent {
    background-color: var(--accent-3);
    color: var(--bg);
  }
  .friends-btn-accent:hover { background-color: var(--accent-1); }
  .friends-btn-accent-ghost {
    background-color: color-mix(in oklab, var(--bg) 96%, var(--fg) 4%);
    color: color-mix(in oklab, var(--fg) 80%, transparent);
    border-color: color-mix(in oklab, var(--fg) 18%, transparent);
  }
  .friends-btn-accent-ghost:hover {
    background-color: color-mix(in oklab, var(--accent-3) 12%, transparent);
    color: var(--fg);
    border-color: color-mix(in oklab, var(--fg) 35%, transparent);
  }
  .friends-btn-sm { @apply py-1.5 px-3 text-xs; }
  .friends-btn-danger {
    background-color: #ef4444; /* red-500 */
    color: white;
  }
  .friends-btn-danger:hover { background-color: #dc2626; } /* red-600 */

  /* Palette colorblind (Okabe–Ito) + contrastes renforcés */
.colorblind {
  --bg: #ffffff;
  --fg: #0a0a0a;
  --accent-1: #0072b2; 
  --accent-2: #e69f00; 
  --accent-3: #009e73; 
  --danger:   #d55e00;
  --ok:       #009e73;
  --accent-1-rgb: 0,114,178; /* RGB pour cursor perso */
  --accent-3-rgb: 0,158,115; /* same */
}

.colorblind a { text-decoration: underline; text-underline-offset: 2px; }
.colorblind :focus-visible { outline: 3px solid var(--accent-2); outline-offset: 3px; }

.colorblind.dark {
  --bg: #0a0a0a; 
  --fg: #f5f5f5; 
  
  /* Palette Okabe–Ito adaptee au dark */
  --accent-1: #56b4e9; 
  --accent-2: #f0e442; 
  --accent-3: #009e73; 
  --danger:   #e69f00; 
  --ok:       #009e73;

  /* Version RGB pour custom cursor et effets */
  --accent-1-rgb: 86,180,233;
  --accent-3-rgb: 0,158,115;
}

/* Boost accessibilite en dark aussi */
.colorblind.dark a { text-decoration: underline; text-underline-offset: 2px; }
.colorblind.dark :focus-visible { outline: 3px solid var(--accent-2); outline-offset: 3px; }

}
